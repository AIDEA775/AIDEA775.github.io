<!doctype html><html lang=es><head><meta charset=utf-8><title>Linux Mainline en CHIP</title><meta name=generator content="Hugo 0.94.2"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/main.min.38d170531c6b000adee13b4b66dcd03314305959accd4871cbd46e2d0312c148.css type=text/css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Roboto+Slab:wght@300;400;600;700;900&family=Roboto:ital,wght@0,400;0,900;1,400;1,900&display=swap" rel=stylesheet><link id=favicon rel=icon href=/favicon.png type=image/png sizes=16x16><script src=https://aidea775.github.io/assets/randfavicon.js defer async></script></head><body><div class=container><header><div><a class=logo href=https://aidea775.github.io/><span>AIDEA775</span>
en español</a></div><nav><ul><li class=button><a href=https://aidea775.github.io/blog/>blog</a></li><li class=button><a href=https://aidea775.github.io/proyectos/>proyectos</a></li><li class=button><a href=https://aidea775.github.io/comics/>comics</a></li><li class=button><a href=https://aidea775.github.io/haikus/>haikus</a></li><li class=button><a href=https://aidea775.github.io/gists/>gists</a></li></ul></nav></header><main role=main><article class=post itemscope itemtype=http://schema.org/BlogPosting><div class=meta><time>16 de agosto de 2019</time></div><h1>Linux Mainline en CHIP</h1>Compilé Linux mainline para la CHIP.<hr><section class=body itemprop=articleBody><p>En este texto cuento como fue el proceso que llevé a cabo para compilar
<em>linux mainline</em> para la CHIP desde la primera vez que la enchufé.</p><p>CHIP es una computadora <em>single-board</em> fabricada por Next Thing Co. (NTC),
lanzado como <em>open-source hardware</em> corriendo <em>open-source software</em>.
Fue anunciado como &ldquo;la primera computadora del mundo de $ 9&rdquo;. Mas info en
<a href=https://en.wikipedia.org/wiki/CHIP_(computer)>Wikipedia</a>.</p><p><strong>Tabla de contenidos</strong><aside><nav id=TableOfContents><ol><li><a href=#flasheando>Flasheando</a><ol><li><a href=#compilar>Compilar</a></li><li><a href=#mover>Mover</a></li></ol></li><li><a href=#conectando>Conectando</a></li><li><a href=#booteando>Booteando</a><ol><li><a href=#rootfs>Rootfs</a></li><li><a href=#nfs>NFS</a></li><li><a href=#ips>IPs</a></li><li><a href=#recompilar>Recompilar</a></li><li><a href=#bootear-posta>Bootear posta</a></li></ol></li></ol></nav></aside></p><h1 id=flasheando><a class=anchor href=#flasheando aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Flasheando</h1><p>La primera vez que alimenté a la CHIP los leds prendian, pero no tenía salida
de video. Usé el script de la siguiente guía para flashearla.</p><p><a href=http://www.chip-community.org/index.php/Flash_from_command_line>http://www.chip-community.org/index.php/Flash_from_command_line</a></p><p>Otra guía para flashear sin conexión y en español (por Alejandro Gaut):
<a href=https://gitlab.com/snippets/1866690>https://gitlab.com/snippets/1866690</a></p><p>Luego de flashearla, los leds empezaron a parpadear,
pero seguía sin video, a prueba y error, descubrí que debía conectar la
salida de audio R del RCA (roja) a la entrada de video (amarilla).</p><p>Una vez que el Debian de NTC booteó, y luego de jugar un buen rato a
<a href="https://www.youtube.com/watch?v=cP1x_EypI6Q">Celeste Classic</a>,
empecé a compilar linux mainline.</p><h2 id=compilar><a class=anchor href=#compilar aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Compilar</h2><p>Pasos sacados de <a href=http://www.chip-community.org/index.php/Compile_the_Linux_kernel_for_CHIP>aqui</a>.</p><p>Cross compiling toolchain:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install gcc-arm-linux-gnueabihf binutils-arm-linux-gnueabihf
</span></span></code></pre></div><p>Linux Mainline:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git
</span></span><span style=display:flex><span><span style=color:#6272a4># sino sólo el último commit</span>
</span></span><span style=display:flex><span>git clone --depth <span style=color:#bd93f9>1</span> git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git
</span></span></code></pre></div><p>Kernel config:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cp arch/arm/configs/sunxi_defconfig .config
</span></span></code></pre></div><p>Configurar kernel:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make <span style=color:#8be9fd;font-style:italic>ARCH</span><span style=color:#ff79c6>=</span>arm <span style=color:#8be9fd;font-style:italic>CROSS_COMPILE</span><span style=color:#ff79c6>=</span>/usr/bin/arm-linux-gnueabihf- menuconfig
</span></span></code></pre></div><p>No se si esto es tan importante:</p><blockquote><p>IMPORTANT: add a local version suffix. Follow the menus:</p></blockquote><pre tabindex=0><code class=language-none data-lang=none>    General setup  ---&gt;
    () Local version - append to kernel release
</code></pre><p>Compilar kernel:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make -j13 <span style=color:#8be9fd;font-style:italic>ARCH</span><span style=color:#ff79c6>=</span>arm <span style=color:#8be9fd;font-style:italic>CROSS_COMPILE</span><span style=color:#ff79c6>=</span>/usr/bin/arm-linux-gnueabihf-
</span></span></code></pre></div><blockquote><p>El parametro -j debería ser el numero de cores de tu procesador + 1.</p></blockquote><p>Modulos (tal vez esto no sea necesario):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>export</span> <span style=color:#8be9fd;font-style:italic>WORKSPACE</span><span style=color:#ff79c6>=</span>./build
</span></span><span style=display:flex><span>make <span style=color:#8be9fd;font-style:italic>ARCH</span><span style=color:#ff79c6>=</span>arm <span style=color:#8be9fd;font-style:italic>CROSS_COMPILE</span><span style=color:#ff79c6>=</span>/usr/bin/arm-linux-gnueabihf- <span style=color:#8be9fd;font-style:italic>INSTALL_MOD_PATH</span><span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>$WORKSPACE</span> modules_install
</span></span></code></pre></div><p>Esto instalará los modulos en <code>$WORKSPACE/lib</code> (después será copiado a la CHIP).</p><h2 id=mover><a class=anchor href=#mover aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Mover</h2><p>Elimina los symlinks <code>build</code> y <code>source</code> de <code>lib/</code> porque <code>[s]cp -r</code> los seguirá.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>export</span> <span style=color:#8be9fd;font-style:italic>RELEASE</span><span style=color:#ff79c6>=</span>5.2.0-rc1vv1
</span></span><span style=display:flex><span>unlink lib/modules/<span style=color:#8be9fd;font-style:italic>$RELEASE</span>/build
</span></span><span style=display:flex><span>unlink lib/modules/<span style=color:#8be9fd;font-style:italic>$RELEASE</span>/source
</span></span></code></pre></div><p>Ahora tendrás que <strong>configurar un servidor ssh en la CHIP</strong>,
no debería ser muy complicado.</p><p>Copiá todo a un directorio temporal a la CHIP:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp arch/arm/boot/dts/sun5i-r8-chip.dtb chip@chip:tmp
</span></span><span style=display:flex><span>scp -r build/lib/modules/<span style=color:#8be9fd;font-style:italic>$RELEASE</span> arch/arm/boot/zImage .config System.map chip@chip:tmp
</span></span></code></pre></div><p>Y luego movelo a donde corresponda:</p><table><thead><tr><th>workspace source location</th><th>destination on CHIP</th></tr></thead><tbody><tr><td>arch/arm/boot/zImage</td><td>/boot/vmlinuz-$RELEASE</td></tr><tr><td>.config</td><td>/boot/config-$RELEASE</td></tr><tr><td>System.map</td><td>/boot/System.map-$RELEASE</td></tr><tr><td>lib/modules/$RELEASE</td><td>/lib/modules/$RELEASE</td></tr></tbody></table><h1 id=conectando><a class=anchor href=#conectando aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Conectando</h1><p>Pasos sacado de <a href=http://www.chip-community.org/index.php/Chip9$_U-Boot:_how_to_test_a_new_kernel_(in_a_safe_way)#You_need_.28UART1.29_console_access.21>aquí</a>.</p><p>Necesitamos un cable USB-UART y conectarlo como se debe. (TODO: Agregar foto)</p><ul><li>Ground pin 1</li><li>TX pin 3</li><li>RX pin 5</li></ul><p><strong>CABLE ROJO NO, nada de +5v.</strong></p><p>Luego instalar screen:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install screen
</span></span></code></pre></div><p>Conecta el lado del USB a la pc, y lanza screen:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>screen /dev/ttyUSB0 <span style=color:#bd93f9>115200</span>
</span></span></code></pre></div><p>Chequeá la salida de <code>ls /dev/tty*</code> antes y despues de conectar la CHIP para
encontar el archivo correcto.</p><blockquote><p>Si te sale <code>screen is terminating error</code>, probá con:</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo screen /dev/ttyUSB0 <span style=color:#bd93f9>115200</span>
</span></span></code></pre></div><p>Ahora bootea tu CHIP (conectala a la alimentación).</p><p>Tenes 3 segundos para parar el proceso de booteo y tener acceso a la shell de u-boot.</p><pre tabindex=0><code class=language-none data-lang=none>U-Boot SPL 2016.01-00088-g99c771f (Dec 09 2016 - 22:29:06)
DRAM: 512 MiB
CPU: 1008000000Hz, AXI/AHB/APB: 3/2/2
Trying to boot from NAND


U-Boot 2016.01-00088-g99c771f (Dec 09 2016 - 22:29:06 +0000) Allwinner Technology

CPU:   Allwinner A13 (SUN5I)
I2C:   ready
DRAM:  512 MiB
NAND:  8192 MiB
video-mode 720x480-24@60 not available, falling back to 1024x768-24@60
Setting up a 720x480i composite-ntsc console (overscan 40x20)
In:    serial
Out:   serial
Err:   serial
Net:   usb_ether
starting USB...
No controllers found
Hit any key to stop autoboot:  0
=&gt;
</code></pre><h1 id=booteando><a class=anchor href=#booteando aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Booteando</h1><p>La memoria NAND MLC que tiene la CHIP no está soportada en Linux Mainline.
Por lo que lo siguiente va a tirar kernel panic porque no encuentra un <code>rootfs</code>.</p><p>Pero, técnicamente, Linux arranca.</p><p>La solución, es bootear con un rootfs a través de NFS por usb, en modo usb-device-ethernet,
que está en la siguiente sección.</p><p>Los pasos para bootear serían:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>editenv bootcmd
</span></span><span style=display:flex><span><span style=color:#6272a4># cambiar `for path in ${bootpaths}; do run boot_$path; done` por `run boot_noinitrd`</span>
</span></span><span style=display:flex><span>editenv boot_noinitrd
</span></span><span style=display:flex><span><span style=color:#6272a4># cambiar el path del kernel `/boot/zImage` a `/boot/vmlinuz-$RELEASE`</span>
</span></span><span style=display:flex><span>run boot
</span></span></code></pre></div><p>Para copypastear (cambiá el valor de <code>$RELEASE</code>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>setenv bootcmd <span style=color:#f1fa8c>&#34;run test_fastboot; if test -n </span><span style=color:#f1fa8c>${</span><span style=color:#8be9fd;font-style:italic>fel_booted</span><span style=color:#f1fa8c>}</span><span style=color:#f1fa8c> &amp;&amp; test -n </span><span style=color:#f1fa8c>${</span><span style=color:#8be9fd;font-style:italic>scriptaddr</span><span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>; then echo (FEL boot); source </span><span style=color:#f1fa8c>${</span><span style=color:#8be9fd;font-style:italic>scriptaddr</span><span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>; fi; run boot_noinitrd&#34;</span>
</span></span><span style=display:flex><span>setenv boot_noinitrd <span style=color:#f1fa8c>&#34;mtdparts; ubi part UBI; ubifsmount ubi0:rootfs; ubifsload </span><span style=color:#8be9fd;font-style:italic>$fdt_addr_r</span><span style=color:#f1fa8c> /boot/sun5i-r8-chip.dtb; ubifsload </span><span style=color:#8be9fd;font-style:italic>$kernel_addr_r</span><span style=color:#f1fa8c> /boot/vmlinuz-</span><span style=color:#8be9fd;font-style:italic>$RELEASE</span><span style=color:#f1fa8c>; bootz </span><span style=color:#8be9fd;font-style:italic>$kernel_addr_r</span><span style=color:#f1fa8c> - </span><span style=color:#8be9fd;font-style:italic>$fdt_addr_r</span><span style=color:#f1fa8c>&#34;</span>
</span></span><span style=display:flex><span>run boot
</span></span></code></pre></div><h2 id=rootfs><a class=anchor href=#rootfs aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Rootfs</h2><p>Usé debootstrap:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install debootstrap
</span></span></code></pre></div><p>Generar el rootfs para la CHIP (armhf = 32bits):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir /nfs/chip
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>cd</span> /nfs/chip
</span></span><span style=display:flex><span>debootstrap --arch armhf stable chip http://deb.debian.org/debian/
</span></span></code></pre></div><h2 id=nfs><a class=anchor href=#nfs aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>NFS</h2><p>Pasos sacados de <a href=http://www.chip-community.org/index.php/Booting_a_new_kernel_and_rootfs_via_NFS>aquí</a>.</p><p>NFS server:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat /etc/exports
</span></span><span style=display:flex><span>/nfs/chip 192.168.0.0/16<span style=color:#ff79c6>(</span>rw,sync<span style=color:#ff79c6>)</span>
</span></span></code></pre></div><p>Iniciar el servidor</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl restart nfs-server.service
</span></span></code></pre></div><h2 id=ips><a class=anchor href=#ips aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>IPs</h2><p>Bootear en Debian de NTC para chequear el servidor NFS.</p><p>Cuando conecto la CHIP, me aparece una nueva interfaz de red usb0,
que udev la renombra a enp3s0f0u1 (ver <code>dmesg | tail</code>).</p><p>En el server (<em>server~seven~7</em>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ip addr add 192.168.1.7/24 dev enp3s0f0u1
</span></span></code></pre></div><p>En la CHIP (<em>chip~two~2</em>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ip addr add 192.168.1.2/24 dev usb0
</span></span></code></pre></div><p>Chequear ping de una maquina a otra, y si va bien:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mount 192.168.1.7:/nfs/chip tmp/
</span></span></code></pre></div><p>Nuestro servidor NFS está andando, ahora sólo hay que compilar nuestro Linux
con soporte usb ethernet (<code>g_ether</code>).</p><h2 id=recompilar><a class=anchor href=#recompilar aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Recompilar</h2><p>Pasos sacados de <a href=https://developer.ridgerun.com/wiki/index.php/How_to_use_USB_device_networking>aquí</a>.</p><p>Activar <code>USB_ETH</code> con <code>menuconfig</code>.</p><pre tabindex=0><code class=language-none data-lang=none>Symbol: USB_ETH [=m]
   Prompt: Ethernet Gadget (with CDC Ethernet support)
     Defined at drivers/usb/gadget/Kconfig:628
     Depends on: &lt;choice&gt; &amp;&amp; NET
     Location:
       -&gt; Kernel configuration
         -&gt; Device Drivers
           -&gt; USB support (USB_SUPPORT [=y])
             -&gt; USB Gadget Support (USB_GADGET [=y])
               -&gt; USB Gadget Drivers (&lt;choice&gt; [=m])
</code></pre><p>Compilar, copiar y mover como antes.</p><h2 id=bootear-posta><a class=anchor href=#bootear-posta aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Bootear posta</h2><p>Reiniciar la CHIP (<code>sudo reboot</code>) y parar U-Boot.</p><p>Con setenv definir:</p><pre tabindex=0><code class=language-none data-lang=none>setenv g_ether.dev_addr de:ad:be:af:00:01
setenv g_ether.host_addr de:ad:be:af:00:00
setenv ip 192.168.1.2:192.168.1.7::255.255.255.0:chip:usb0:none
setenv nfsroot 192.168.1.7:/nfs/chip

setenv nfsload mtdparts; ubi part UBI; ubifsmount ubi0:rootfs; ubifsload $fdt_addr_r /boot/sun5i-r8-chip-ml.dtb; ubifsload $kernel_addr_r /boot/vmlinuz-$RELEASE
setenv nfsargs setenv bootargs root=/dev/nfs rw nfsroot=${nfsroot},v3 ip=${ip} rootfstype=nfs g_ether.dev_addr=${g_ether.dev_addr} g_ether.host_addr=${g_ether.host_addr} rootwait
setenv nfs_bootcmd &#34;run nfsload ; run nfsargs ; bootz $kernel_addr_r - $fdt_addr_r&#34;
</code></pre><blockquote><p>Podes guardar las variables permanentemente con <code>saveenv</code>.</p></blockquote><p>Y finalmente, bootear con:</p><pre tabindex=0><code class=language-none data-lang=none>run nfs_bootcmd
</code></pre><hr><pre tabindex=0><code class=language-none data-lang=none># uname -a
Linux chip 5.2.0-rc1vv1-gf49aa1de9 #5 SMP Fri May 24 18:07:53 -03 2019 armv7l GNU/Linux
</code></pre><p>El log completo se encuentra <a href=/media/chip-mainline-kernel.log>acá</a>.</p></section></article></main><svg height="2rem" width="2rem" viewBox="0 0 24 24" fill="var(--divider)"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 10c-1.1.0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1.0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1.0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg><footer><div><a href=https://github.com/AIDEA775 target=_blank rel="noopener noreferrer"><svg width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24c6.6274.0 12-5.3726 12-12C24 5.37258 18.6274.0 12 0 5.37258.0.0 5.37258.0 12c0 6.6274 5.37258 12 12 12z" fill="#3f3f46"/><path d="M12.0003 4.40167c-4.19532.0-7.59844 3.40313-7.59844 7.59843.0 3.3047 2.10937 6.1125 5.05312 7.1625C9.46904 19.1673 9.52061 19.186 9.53467 19.1907 9.57686 19.2048 9.62373 19.2142 9.67061 19.2142 9.91904 19.2142 10.1159 19.0126 10.1159 18.7689 10.1159 18.7548 10.1159 18.7454 10.1159 18.7314c0-.403200000000002.0-.914100000000001.0-1.3219-.48279.098399999999998-1.21404.1922-1.61248.0-.51563-.2485-.77813-.5672-1.02656-1.1953C7.16748 15.4501 6.45498 15.2392 6.42686 15.1079 6.39873 14.972 7.18154 14.7704 7.58467 15.2345 7.98779 15.6985 8.39561 16.6267 9.26279 16.5376 9.68936 16.4954 9.96592 16.4251 10.1394 16.3735 10.1722 16.0735 10.2706 15.7032 10.519 15.4407c-2.03902-.3375-3.39839-1.4343-3.39839-3.5859.0-.979699999999999.28125-1.7391.77812-2.30625C7.81436 9.0798 7.67373 7.9923 8.04873 7.61261c0 0 .529689999999999-.32813 2.04847.74062C10.6644 8.22198 11.2925 8.15636 11.9628 8.15636 11.9769 8.15636 11.9862 8.15636 12.0003 8.15636 12.0144 8.15636 12.0237 8.15636 12.0378 8.15636 12.7128 8.16105 13.3409 8.22667 13.9034 8.35323c1.5188-1.06875 2.0485-.74062 2.0485-.74062C16.3269 7.99698 16.1862 9.08448 16.1019 9.54855 16.5987 10.1204 16.88 10.8798 16.88 11.8548c0 2.1516-1.3547 3.2484-3.3985 3.5859.389099999999999.4078.4032 1.0688.4032 1.3407.0.2578.0 1.9828.0 1.9921C13.8847 19.022 14.0862 19.2189 14.33 19.2189 14.3675 19.2189 14.4003 19.2142 14.4378 19.2048 14.4472 19.2048 14.4753 19.1954 14.4847 19.1907c2.9765-1.0312 5.114-3.8578 5.114-7.1859.0-4.20469-3.4031-7.60313-7.5984-7.60313z" fill="#fff"/></svg></a><a href=https://twitter.com/AIDEA775 target=_blank rel="noopener noreferrer"><svg width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 12c0 6.6281-5.3719 12-12 12C5.37188 24 0 18.6281.0 12 0 5.37188 5.37188.0 12 0c6.6281.0 12 5.37188 12 12z" fill="#3f3f46"/><path d="M16.8046 9.51089C16.9593 12.975 14.3765 16.8328 9.80615 16.8328 8.41396 16.8328 7.12021 16.425 6.03271 15.7265 7.34053 15.8812 8.64365 15.5203 9.67959 14.7093 8.60146 14.6906 7.69209 13.9781 7.37803 12.9984 7.7624 13.0734 8.14209 13.05 8.48897 12.9562 7.30303 12.7171 6.4874 11.6531 6.51553 10.5093c.33281.1828.7125.295300000000001 1.11562.3094C6.53428 10.0875 6.2249 8.63901 6.86709 7.53276 8.08115 9.02339 9.89521 10.0031 11.9437 10.1062 11.5874 8.56401 12.7546 7.08276 14.3437 7.08276c.707800000000001.0 1.3453.3 1.7953.77813C16.7015 7.74839 17.2265 7.54683 17.7046 7.26558 17.5218 7.84214 17.128 8.32495 16.6218 8.62964 17.1187 8.5687 17.5921 8.43745 18.0374 8.24058 17.6999 8.73276 17.2827 9.16401 16.8046 9.51089z" fill="#fff"/></svg></a><a href=https://www.instagram.com/aidea775/ target=_blank rel="noopener noreferrer"><svg width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_48_260)"><path d="M0 11.6952V12.3421c.16875 6.2062 5.16563 11.1891 11.1141 11.6578h1.8281C18.9234 23.5265 23.8359 18.5015 24 12.3327V11.6952C23.8359 5.41866 18.7547.328038 12.6281.0139757 6.0375-.318837.182813 4.96866.0 11.6952z" fill="#3f3f46"/><path d="M12.056 6.02802C13.9685 6.02802 14.1935 6.0327 14.9528 6.0702c.698500000000001.02813 1.0735.15 1.3266.24844C16.6122 6.44989 16.8513 6.60926 17.0997 6.86239 17.3481 7.11551 17.5075 7.35927 17.6388 7.69676 17.7372 7.95458 17.8497 8.33895 17.8872 9.05145 17.9247 9.8202 17.9294 10.0499 17.9294 11.9952 17.9294 13.9405 17.9247 14.1702 17.8872 14.939 17.8591 15.6468 17.7419 16.0358 17.6388 16.2936 17.5075 16.6311 17.3528 16.8749 17.0997 17.128 16.8513 17.3811 16.6122 17.5405 16.2794 17.6718 16.0263 17.7749 15.6466 17.8921 14.9528 17.9202 14.1981 17.9577 13.9685 17.9624 12.056 17.9624 10.1435 17.9624 9.91846 17.9577 9.15908 17.9202 8.46064 17.8921 8.08564 17.7702 7.83252 17.6718 7.49971 17.5405 7.26064 17.3811 7.01221 17.128 6.76377 16.8749 6.60439 16.6311 6.47314 16.2936 6.37471 16.0358 6.26221 15.6515 6.22471 14.939 6.18721 14.1702 6.18252 13.9405 6.18252 11.9952 6.18252 10.0499 6.18721 9.8202 6.22471 9.05145 6.25283 8.34364 6.37002 7.95458 6.47314 7.69676 6.60439 7.35927 6.75908 7.11551 7.01221 6.86239 7.26064 6.60926 7.49971 6.44989 7.83252 6.31864 8.08564 6.21552 8.46533 6.09833 9.15908 6.0702 9.91377 6.03739 10.1435 6.02802 12.056 6.02802zm0-1.3125C10.1106 4.71552 9.86689 4.72489 9.10752 4.76239 8.34814 4.79989 7.82314 4.92177 7.36846 5.09989c-.47344.1875-.87188.43594-1.26563.84375-.39844.40781-.64219.81094-.825 1.29375-.17812.45937-.3.99375-.332809999999999 1.76719C4.90752 9.77802 4.90283 10.0265 4.90283 12.0046S4.91221 14.2311 4.94502 15.0046C4.98252 15.778 5.10439 16.3077 5.27783 16.7718c.18281.478100000000001.42656.8859.825 1.2937C6.50127 18.4733 6.89971 18.7218 7.36846 18.9093 7.82314 19.0921 8.34814 19.214 9.10752 19.2468 9.87158 19.2843 10.1153 19.2936 12.056 19.2936 13.9966 19.2936 14.245 19.2843 15.0044 19.2468 15.7638 19.2093 16.2888 19.0874 16.7435 18.9093 17.2169 18.7218 17.6153 18.4733 18.0091 18.0655 18.4075 17.6577 18.6513 17.2546 18.8341 16.7718 19.0122 16.3124 19.1341 15.778 19.1669 15.0046 19.2044 14.2311 19.2091 13.9827 19.2091 12.0046S19.1997 9.77802 19.1669 9.00458C19.1294 8.23114 19.0075 7.70145 18.8341 7.23739 18.6513 6.75926 18.4075 6.35145 18.0091 5.94364 17.6106 5.53583 17.2122 5.28739 16.7435 5.09989 16.2888 4.91708 15.7638 4.7952 15.0044 4.76239 14.245 4.72489 13.9966 4.71552 12.056 4.71552z" fill="#fff"/><path d="M12.0559 8.25916c-2.0344.0-3.67504 1.67344-3.67504 3.74064s1.64534 3.7406 3.67504 3.7406 3.675-1.6734 3.675-3.7406-1.6453-3.74064-3.675-3.74064zm0 6.16874c-1.3172.0-2.38598-1.0828-2.38598-2.4281S10.7387 9.57166 12.0559 9.57166c1.3172.0 2.3859 1.08284 2.3859 2.42814s-1.0687 2.4281-2.3859 2.4281z" fill="#fff"/><path d="M15.8764 8.98112C16.3501 8.98112 16.7342 8.59076 16.7342 8.10924S16.3501 7.23737 15.8764 7.23737C15.4026 7.23737 15.0186 7.62772 15.0186 8.10924S15.4026 8.98112 15.8764 8.98112z" fill="#fff"/></g><defs><clipPath id="clip0_48_260"><rect width="24" height="24" fill="#fff"/></clipPath></defs></svg></a><a href target=_blank rel="noopener noreferrer"><svg width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24c6.6274.0 12-5.3726 12-12C24 5.37258 18.6274.0 12 0 5.37258.0.0 5.37258.0 12c0 6.6274 5.37258 12 12 12z" fill="#3f3f46"/><path d="M8.75654 17.4235H6.32373V9.5673H8.75654v7.8562zM7.52842 8.54073c-.79219.0-1.43906-.64687-1.43906-1.44843.0-.80157.64218-1.44844 1.43906-1.44844C8.32061 5.64386 8.96748 6.29073 8.96748 7.0923c0 .79687-.64687 1.44843-1.43906 1.44843zM17.869 17.4235H15.4503s0-2.9906.0-4.125c0-1.1296-.4313-1.7625-1.3219-1.7625-.975.0-1.4812.6563-1.4812 1.7625.0 1.2094.0 4.125.0 4.125H10.3128V9.5673h2.3344v1.0594S13.3503 9.32823 15.0144 9.32823c1.664.0 2.8593 1.01717 2.8593 3.12187C17.869 14.5548 17.869 17.4235 17.869 17.4235z" fill="#fff"/></svg></a></div><span>Made with
<a href=http://gohugo.io>Hugo</a><p><i>from the end of world</i></p></span></footer></div></body></html>