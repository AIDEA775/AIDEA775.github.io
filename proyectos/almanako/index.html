<!doctype html><html lang=es>
<head>
<meta charset=utf-8>
<title>Almanako</title>
<meta name=generator content="Hugo 0.92.2">
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=stylesheet href=/main.min.a71734aff63a913d4423c7c62d15c1649cb1391acb18b1c8e2360fc1463885ad.css type=text/css>
<link rel=preconnect href=https://fonts.googleapis.com>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Roboto+Slab:wght@300;400;600;700;900&family=Roboto:ital,wght@0,400;0,900;1,400;1,900&display=swap" rel=stylesheet>
<link id=favicon rel=icon href=/favicon.png type=image/png sizes=16x16>
<script src=https://aidea775.github.io/assets/randfavicon.js defer async></script>
</head>
<body>
<div class=container>
<header>
<div>
<a class=logo href=https://aidea775.github.io/>
<span>
AIDEA775
</span>
en español
</a>
</div>
<nav>
<ul>
<li class=button>
<a href=https://aidea775.github.io/blog/>blog</a>
</li>
<li class=button>
<a href=https://aidea775.github.io/proyectos/>proyectos</a>
</li>
<li class=button>
<a href=https://aidea775.github.io/comics/>comics</a>
</li>
<li class=button>
<a href=https://aidea775.github.io/haikus/>haikus</a>
</li>
<li class=button>
<a href=https://aidea775.github.io/gists/>gists</a>
</li>
</ul>
</nav>
</header>
<main role=main>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<div class=meta>
<time>18 de febrero de 2022</time>
</div>
<h1>
Almanako
</h1>
Una web para imprimir calendarios
<hr>
<section class=body itemprop=articleBody>
<p>En casa nos acostumbramos a tener un calendario en papel para anotar recordatorios de todo tipo: cumples, estudios, exámenes, pagos, etc.</p>
<p>Pero no todos los años encontrábamos almanaques que tengan espacio para escribir.
Hubo un año que mi madre tomó unas hojas A4 usadas e hizo un calendario casero.</p>
<p>Resultó ser muy cómodo, tenía mucho espacio para anotar, era compacto, y no desperdiciaba
espacio con fotos o publicidad. <strong>Pero llevaba tiempo hacerlo.</strong></p>
<p>Así nació <a href=https://github.com/AIDEA775/py-cal>este proyecto</a>,
desde 2017, cada año retomaba el código que
había escrito, y lo volvía a entender y lo mejoraba.</p>
<p>Empezó como un script en Python que generaba imágenes vectoriales en SVG usando la librería
<a href=https://pypi.org/project/svgwrite/>svgwrite</a>:</p>
<figure><img src=https://raw.githubusercontent.com/AIDEA775/py-cal/4ce5cf41a4c394dc4cc5038c8d8075495a65455f/preview.svg alt="Cero sentido de diseño en esos tiempos."><figcaption>
<p>Cero sentido de diseño en esos tiempos.</p>
</figcaption>
</figure>
<p>Luego pasó a usar la librería <a href=https://pypi.org/project/Pillow/>Pillow</a>
para generar imágenes PNG y año tras año fui mejorando de a poco el diseño
(y a medida que iba aprendiendo más cosas de UI/UX):</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><figure><img src=preview-2019.png alt=2019><figcaption>
<p>2019</p>
</figcaption>
</figure>
</td>
<td><figure><img src=preview-2020.png alt=2020><figcaption>
<p>2020</p>
</figcaption>
</figure>
</td>
<td><figure><img src=preview-2021.png alt=2021><figcaption>
<p>2021</p>
</figcaption>
</figure>
</td>
</tr>
</tbody>
</table>
<p>En 2022 pensé que era momento de pasar a PDF, ya que es un buen formato para
imprimir. Pero en vez de usar una librería en Python,
decidí aprovechar que los navegadores pueden imprimir las páginas webs y así que
esté disponible de forma muy práctica.</p>
<p>Además, podría escribir el almanaque en HTML y CSS, y hacerlo responsivo para
distintos tipos de hoja.</p>
<p>Así nace formalmente <a href=https://aidea775.github.io/Almanako/>Almanako</a> (<a href=https://github.com/AIDEA775/Almanako>GitHub</a>),
una web simple, para generar un archivo PDF con 12 hojas, uno por cada mes.</p>
<hr>
<h3 id=decisiones>
<a class=anchor href=#decisiones aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg>
</a>Decisiones
</h3><p>Ya tenía algo de experiencia con <a href=https://tailwindcss.com/>Tailwind</a>,
así que no fue difícil de elegirlo como framework CSS.</p>
<p>No había mucha lógica en JavaScript para implementar,
solo lo necesario para generar una lista de matrices (7x5) con los días de cada mes, y parsear archivos en formato ICS para agregar los cumpleaños y feriados.</p>
<p>Generar el HTML fue todo un desafío, intenté usar JS nativo, sin
ninguna librería, pero resultó ser muy verboso y complicado.</p>
<p>Luego de una investigación y unas pruebas, <a href=https://svelte.dev/>Svelte</a> era lo que buscaba.
Simple, basado en componentes, sin ninguna carga innecesaria en runtime
que haga la web más pesada de lo que debería, ya que al final, era solo HTML sin nada más: Nada de almacenamiento, ni API REST, ni cookies, ni routing,
no necesito un DOM virtual.</p>
<h3 id=aprendizajes>
<a class=anchor href=#aprendizajes aria-hidden=true><svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg>
</a>Aprendizajes
</h3><p>Más allá de aprender <em>Svelte</em> sobre la marcha (y quedar fascinado por simple
que queda el código) me topé con varios problemas que no esperaba:</p>
<ol>
<li>
<p><strong>Los navegadores renderizan de forma distinta</strong></p>
<p>En Firefox siempre se vio todo correcto, pero al pasar a Chrome,
aparecieron algunas líneas divisorias que no deberían estar ahí.</p>
<p>¡Eran errores de redondeo!</p>
<p><a href=https://www.palantir.net/blog/responsive-design-s-dirty-little-secret>Este post</a>
explica con lujo de detalle este GRAN problema que tiene CSS.</p>
</li>
<li>
<p><strong>Hay estilos que son difíciles de personalizar</strong></p>
<p>Aun cuando Tailwind quita todo el estilo personalizado de los navegadores, la posición y tamaño del puntito de los <code>&lt;ul></code> difieren entre Firefox y Chrome.</p>
<p>Para poder mantener consistencia visual, tuve que no seguir las mejores prácticas
y usar el Unicode bullet <code>• (U+2022)</code> para dibujar el puntito.</p>
</li>
<li>
<p><strong>Performance para la única animación que había</strong></p>
<p>Al presionar <em>OPTIONS</em>, se abre un menú que desplaza la vista previa de los
meses hacia abajo.</p>
<p>Al parecer esta decisión de diseño no es muy buena, ya que el navegador vuelve a renderizar los meses por cada frame, eso es bastante costoso y provoca <em>lag</em> en la animación, especialmente en un celular.</p>
<p>Terminé aprendiendo sobre la propiedad CSS <code>will-change</code> para poder optimizar esa animación.</p>
<blockquote>
<p>Aunque debería ser usada como última opción, no encontré otra forma para que el navegador no vuelva a renderizar los meses.</p>
</blockquote>
</li>
</ol>
<figure><img src=preview-2022.png alt="Lo sé, falta el 1º de marzo, me di cuenta recién en marzo."><figcaption>
<p>Lo sé, falta el 1º de marzo, me di cuenta recién en marzo.</p>
</figcaption>
</figure>
</section>
</article>
</main><svg height="2rem" width="2rem" viewBox="0 0 24 24" fill="var(--divider)"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 10c-1.1.0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1.0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1.0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
<footer>
<div>
<a href=https://github.com/AIDEA775 target=_blank rel="noopener noreferrer"><svg width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24c6.6274.0 12-5.3726 12-12C24 5.37258 18.6274.0 12 0 5.37258.0.0 5.37258.0 12c0 6.6274 5.37258 12 12 12z" fill="#3f3f46"/><path d="M12.0003 4.40167c-4.19532.0-7.59844 3.40313-7.59844 7.59843.0 3.3047 2.10937 6.1125 5.05312 7.1625C9.46904 19.1673 9.52061 19.186 9.53467 19.1907 9.57686 19.2048 9.62373 19.2142 9.67061 19.2142 9.91904 19.2142 10.1159 19.0126 10.1159 18.7689 10.1159 18.7548 10.1159 18.7454 10.1159 18.7314c0-.403200000000002.0-.914100000000001.0-1.3219-.48279.098399999999998-1.21404.1922-1.61248.0-.51563-.2485-.77813-.5672-1.02656-1.1953C7.16748 15.4501 6.45498 15.2392 6.42686 15.1079 6.39873 14.972 7.18154 14.7704 7.58467 15.2345 7.98779 15.6985 8.39561 16.6267 9.26279 16.5376 9.68936 16.4954 9.96592 16.4251 10.1394 16.3735 10.1722 16.0735 10.2706 15.7032 10.519 15.4407c-2.03902-.3375-3.39839-1.4343-3.39839-3.5859.0-.979699999999999.28125-1.7391.77812-2.30625C7.81436 9.0798 7.67373 7.9923 8.04873 7.61261c0 0 .529689999999999-.32813 2.04847.74062C10.6644 8.22198 11.2925 8.15636 11.9628 8.15636 11.9769 8.15636 11.9862 8.15636 12.0003 8.15636 12.0144 8.15636 12.0237 8.15636 12.0378 8.15636 12.7128 8.16105 13.3409 8.22667 13.9034 8.35323c1.5188-1.06875 2.0485-.74062 2.0485-.74062C16.3269 7.99698 16.1862 9.08448 16.1019 9.54855 16.5987 10.1204 16.88 10.8798 16.88 11.8548c0 2.1516-1.3547 3.2484-3.3985 3.5859.389099999999999.4078.4032 1.0688.4032 1.3407.0.2578.0 1.9828.0 1.9921C13.8847 19.022 14.0862 19.2189 14.33 19.2189 14.3675 19.2189 14.4003 19.2142 14.4378 19.2048 14.4472 19.2048 14.4753 19.1954 14.4847 19.1907c2.9765-1.0312 5.114-3.8578 5.114-7.1859.0-4.20469-3.4031-7.60313-7.5984-7.60313z" fill="#fff"/></svg>
</a>
<a href=https://twitter.com/AIDEA775 target=_blank rel="noopener noreferrer"><svg width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 12c0 6.6281-5.3719 12-12 12C5.37188 24 0 18.6281.0 12 0 5.37188 5.37188.0 12 0c6.6281.0 12 5.37188 12 12z" fill="#3f3f46"/><path d="M16.8046 9.51089C16.9593 12.975 14.3765 16.8328 9.80615 16.8328 8.41396 16.8328 7.12021 16.425 6.03271 15.7265 7.34053 15.8812 8.64365 15.5203 9.67959 14.7093 8.60146 14.6906 7.69209 13.9781 7.37803 12.9984 7.7624 13.0734 8.14209 13.05 8.48897 12.9562 7.30303 12.7171 6.4874 11.6531 6.51553 10.5093c.33281.1828.7125.295300000000001 1.11562.3094C6.53428 10.0875 6.2249 8.63901 6.86709 7.53276 8.08115 9.02339 9.89521 10.0031 11.9437 10.1062 11.5874 8.56401 12.7546 7.08276 14.3437 7.08276c.707800000000001.0 1.3453.3 1.7953.77813C16.7015 7.74839 17.2265 7.54683 17.7046 7.26558 17.5218 7.84214 17.128 8.32495 16.6218 8.62964 17.1187 8.5687 17.5921 8.43745 18.0374 8.24058 17.6999 8.73276 17.2827 9.16401 16.8046 9.51089z" fill="#fff"/></svg>
</a>
<a href=https://www.instagram.com/aidea775/ target=_blank rel="noopener noreferrer"><svg width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_48_260)"><path d="M0 11.6952V12.3421c.16875 6.2062 5.16563 11.1891 11.1141 11.6578h1.8281C18.9234 23.5265 23.8359 18.5015 24 12.3327V11.6952C23.8359 5.41866 18.7547.328038 12.6281.0139757 6.0375-.318837.182813 4.96866.0 11.6952z" fill="#3f3f46"/><path d="M12.056 6.02802C13.9685 6.02802 14.1935 6.0327 14.9528 6.0702c.698500000000001.02813 1.0735.15 1.3266.24844C16.6122 6.44989 16.8513 6.60926 17.0997 6.86239 17.3481 7.11551 17.5075 7.35927 17.6388 7.69676 17.7372 7.95458 17.8497 8.33895 17.8872 9.05145 17.9247 9.8202 17.9294 10.0499 17.9294 11.9952 17.9294 13.9405 17.9247 14.1702 17.8872 14.939 17.8591 15.6468 17.7419 16.0358 17.6388 16.2936 17.5075 16.6311 17.3528 16.8749 17.0997 17.128 16.8513 17.3811 16.6122 17.5405 16.2794 17.6718 16.0263 17.7749 15.6466 17.8921 14.9528 17.9202 14.1981 17.9577 13.9685 17.9624 12.056 17.9624 10.1435 17.9624 9.91846 17.9577 9.15908 17.9202 8.46064 17.8921 8.08564 17.7702 7.83252 17.6718 7.49971 17.5405 7.26064 17.3811 7.01221 17.128 6.76377 16.8749 6.60439 16.6311 6.47314 16.2936 6.37471 16.0358 6.26221 15.6515 6.22471 14.939 6.18721 14.1702 6.18252 13.9405 6.18252 11.9952 6.18252 10.0499 6.18721 9.8202 6.22471 9.05145 6.25283 8.34364 6.37002 7.95458 6.47314 7.69676 6.60439 7.35927 6.75908 7.11551 7.01221 6.86239 7.26064 6.60926 7.49971 6.44989 7.83252 6.31864 8.08564 6.21552 8.46533 6.09833 9.15908 6.0702 9.91377 6.03739 10.1435 6.02802 12.056 6.02802zm0-1.3125C10.1106 4.71552 9.86689 4.72489 9.10752 4.76239 8.34814 4.79989 7.82314 4.92177 7.36846 5.09989c-.47344.1875-.87188.43594-1.26563.84375-.39844.40781-.64219.81094-.825 1.29375-.17812.45937-.3.99375-.332809999999999 1.76719C4.90752 9.77802 4.90283 10.0265 4.90283 12.0046S4.91221 14.2311 4.94502 15.0046C4.98252 15.778 5.10439 16.3077 5.27783 16.7718c.18281.478100000000001.42656.8859.825 1.2937C6.50127 18.4733 6.89971 18.7218 7.36846 18.9093 7.82314 19.0921 8.34814 19.214 9.10752 19.2468 9.87158 19.2843 10.1153 19.2936 12.056 19.2936 13.9966 19.2936 14.245 19.2843 15.0044 19.2468 15.7638 19.2093 16.2888 19.0874 16.7435 18.9093 17.2169 18.7218 17.6153 18.4733 18.0091 18.0655 18.4075 17.6577 18.6513 17.2546 18.8341 16.7718 19.0122 16.3124 19.1341 15.778 19.1669 15.0046 19.2044 14.2311 19.2091 13.9827 19.2091 12.0046S19.1997 9.77802 19.1669 9.00458C19.1294 8.23114 19.0075 7.70145 18.8341 7.23739 18.6513 6.75926 18.4075 6.35145 18.0091 5.94364 17.6106 5.53583 17.2122 5.28739 16.7435 5.09989 16.2888 4.91708 15.7638 4.7952 15.0044 4.76239 14.245 4.72489 13.9966 4.71552 12.056 4.71552z" fill="#fff"/><path d="M12.0559 8.25916c-2.0344.0-3.67504 1.67344-3.67504 3.74064s1.64534 3.7406 3.67504 3.7406 3.675-1.6734 3.675-3.7406-1.6453-3.74064-3.675-3.74064zm0 6.16874c-1.3172.0-2.38598-1.0828-2.38598-2.4281S10.7387 9.57166 12.0559 9.57166c1.3172.0 2.3859 1.08284 2.3859 2.42814s-1.0687 2.4281-2.3859 2.4281z" fill="#fff"/><path d="M15.8764 8.98112C16.3501 8.98112 16.7342 8.59076 16.7342 8.10924S16.3501 7.23737 15.8764 7.23737C15.4026 7.23737 15.0186 7.62772 15.0186 8.10924S15.4026 8.98112 15.8764 8.98112z" fill="#fff"/></g><defs><clipPath id="clip0_48_260"><rect width="24" height="24" fill="#fff"/></clipPath></defs></svg>
</a>
<a href target=_blank rel="noopener noreferrer"><svg width="2rem" height="2rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 24c6.6274.0 12-5.3726 12-12C24 5.37258 18.6274.0 12 0 5.37258.0.0 5.37258.0 12c0 6.6274 5.37258 12 12 12z" fill="#3f3f46"/><path d="M8.75654 17.4235H6.32373V9.5673H8.75654v7.8562zM7.52842 8.54073c-.79219.0-1.43906-.64687-1.43906-1.44843.0-.80157.64218-1.44844 1.43906-1.44844C8.32061 5.64386 8.96748 6.29073 8.96748 7.0923c0 .79687-.64687 1.44843-1.43906 1.44843zM17.869 17.4235H15.4503s0-2.9906.0-4.125c0-1.1296-.4313-1.7625-1.3219-1.7625-.975.0-1.4812.6563-1.4812 1.7625.0 1.2094.0 4.125.0 4.125H10.3128V9.5673h2.3344v1.0594S13.3503 9.32823 15.0144 9.32823c1.664.0 2.8593 1.01717 2.8593 3.12187C17.869 14.5548 17.869 17.4235 17.869 17.4235z" fill="#fff"/></svg>
</a>
</div>
<span>
Made with
<a href=http://gohugo.io>Hugo</a>
from <i>the end of world.</i>
</span>
</footer>
</div>
</body>
</html>